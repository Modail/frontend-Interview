#### 讲一讲进程和线程
　进程一般由程序、数据集合和进程控制块三部分组成。程序用于描述进程要完成的功能，是控制进程执行的指令集；数据集合是程序在执行时所需要的数据和工作区；程序控制块(Program Control Block，简称PCB)，包含进程的描述信息和控制信息，是进程存在的唯一标志。
  一个标准的线程由线程ID、当前指令指针(PC)、寄存器和堆栈组成。而进程由内存空间(代码、数据、进程空间、打开的文件)和一个或多个线程组成。
    1. 线程是程序执行的最小单位，而进程是操作系统分配资源的最小单位；
　　2. 一个进程由一个或多个线程组成，线程是一个进程中代码的不同执行路线；
　　3. 进程之间相互独立，但同一进程下的各个线程之间共享程序的内存空间(包括代码段、数据集、堆等)及一些进程级的资源(如打开文件和信号)，某进程内的线程在其它进程不可见；
　　4. 调度和切换：线程上下文切换比进程上下文切换要快得多。（因为不需要重新分配资源（即地址空间））

#### 进程通信
1. 管道(无名管道)pipe：管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。
2. 有名管道FIFO：有名管道也是半双工的通信方式，但是它允许无亲缘关系进程间的通信。
3. 消息队列MessageQueue：消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。
4. 共享存储SharedMemory：共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号量，配合使用，来实现进程间的同步和通信。
5. 信号量Semaphore：信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。
6. 套接字Socket：套接字也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同主机及其相同主机间的进程通信。
7. 信号 ( sinal ) ： 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

#### 调度算法
批处理系统
1. 先来先服务： FCFS，非抢占式
按照到达的先后顺序调度，也就是等待时间越久的越优先得到服务。
优缺点：
公平、算法实现简单，不会产生饥饿（某进程长期得不到服务）
对长作业有利、对短作业不利
2. 短作业优先： SJF，非抢占式
每次调度时选择当前已到达且运行时间最短的进程。
优缺点：
相比先来先服务算法平均等待时间更短
对短作业有利，对长作业不利，不公平会产生饥饿
3. 最短剩余时间优先： SRTN，抢占式
短作业的一种，按照剩余时间最短的顺序进行调度。优缺点同短作业优先算法。
4. 高响应比优先： HRRN，非抢占式
调度时计算所有在就绪队列中进程的响应比（(等待时间+服务时间)/服务时间），选择响应比最高的进程分配处理机。
优缺点：结合先来先服务和短作业的优缺点的一种折中算法。

交互式系统
1. 时间片轮转
轮流让就绪队列中的队头的进程依次执行一个时间片，之后两种情况：
时间片没完而进程执行完毕，则会主动放弃处理机
时间片用完而进程未执行完毕，则会停止执行并将该线程送完就绪队列的队尾
时间片轮转算法的效率和时间片的大小有很大关系：
如果时间片太大，使得每个进程都可以在一个时间片内完成，则会退化成先来先服务算法
如果时间片太小，那么进程切换就会很频繁，系统会花大量时间来处理进程切换。
2. 优先级调度
优先处理优先级最高的进程，分两种：
非抢占式：选择当前已到达且优先级最高的进程
抢占式：会检查就绪队列中有没有优先级最高的进程（包括执行中的）
为了防止低优先级的进程永远等不到调度，可以随着时间的推移增加等待进程的优先级（动态优先级）。

#### 怎么保证线程安全
互斥(锁)

#### 信号量
信号量(Semaphore)，有时被称为信号灯，是在多线程环境下使用的一种设施，是可以用来保证两个或多个关键代码段不被并发调用。

#### 死锁和死锁避免
死锁，是指多个进程在运行过程中因争夺资源而造成的一种僵局，当进程处于这种僵持状态时，若无外力作用，它们都将无法再向前推进。
产生死锁的必要条件：
互斥条件：进程要求对所分配的资源进行排它性控制，即在一段时间内某资源仅为一进程所占用。
请求和保持条件：当进程因请求资源而阻塞时，对已获得的资源保持不放。
不剥夺条件：进程已获得的资源在未使用完之前，不能剥夺，只能在使用完时由自己释放。
环路等待条件：在发生死锁时，必然存在一个进程--资源的环形链。
预防死锁：
资源一次性分配：一次性分配所有资源，这样就不会再有请求了：（破坏请求条件）
只要有一个资源得不到分配，也不给这个进程分配其他的资源：（破坏请保持条件）
可剥夺资源：即当某进程获得了部分资源，但得不到其它资源，则释放已占有的资源（破坏不可剥夺条件）
资源有序分配法：系统给每类资源赋予一个编号，每一个进程按编号递增的顺序请求资源，释放则相反（破坏环路等待条件）

#### 银行家算法
某个进程请求资源时，操作系统会进行预分配，然后判断是否存在一条安全序列，如果存在则这次资源分配后不会进入死锁的局面，就满足这次资源请求，如果分配后不存在一个安全序列，则让进程进行等待。
算法的核心就一步：来资源请求，先预分配然后判断当前系统是否为安全状态，如果是就可以分配。
安全状态：当前线程都能成功执行完，不会由于资源不足而进入死锁状态，依据是能否找到一条安全序列。
安全序列：所有进程执行完的一个顺序。
#### 分页和分段
#### 页面置换算法
参考 https://www.cnblogs.com/fkissx/p/4712959.html
